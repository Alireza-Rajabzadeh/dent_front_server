import{a as X,c as Y,d as Z,e as ee,f as te,g as ie,h as se}from"./chunk-NUDIFWYU.js";import{a as le,b as me}from"./chunk-GX2XISEJ.js";import{d as ue}from"./chunk-CQEQXLQP.js";import{a as ce}from"./chunk-ARGY5CUX.js";import{D as ne,F as ae,c as R,e as C,g as $,h as G,j as q,l as W,m as z,n as H,o as J,p as K,u as Q,w as U,y as re,z as oe}from"./chunk-KXF7RT7M.js";import{a as L}from"./chunk-PWV6WPBQ.js";import{$ as O}from"./chunk-464F2QMH.js";import{$a as S,$b as j,Ga as N,Gb as D,Kb as k,L as F,Lb as I,Na as p,S as T,Sa as s,V as M,W as V,Ya as f,ab as E,ba as _,bb as n,ca as v,cb as r,db as c,fc as B,hb as P,jb as b,q as x,vb as w,wa as u,wb as a,xa as g,xb as A}from"./chunk-Q5JY254Z.js";var de=(()=>{class i{constructor(e){this.baseApiService=e}getDoctor(e){return this.baseApiService.getApi("api/lm/dcs/search",e)}getDoctorOption(e="",o=""){return this.baseApiService.getApi("api/lm/dcs",{city_id:e,search:o},!1)}addDoctorLocal(e){return this.baseApiService.postApi("api/lm/dcs",e)}static{this.\u0275fac=function(o){return new(o||i)(M(L))}}static{this.\u0275prov=T({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var pe=(i,l)=>l.id,ge=i=>({"is__invalid-input":i}),he=i=>({"peer-focus:text-destructive!":i});function _e(i,l){i&1&&(n(0,"mat-error"),a(1," \u0636\u0631\u0648\u0631\u06CC \u0645\u06CC \u0628\u0627\u0634\u062F "),r())}function ve(i,l){i&1&&(n(0,"mat-error"),a(1," \u0636\u0631\u0648\u0631\u06CC \u0645\u06CC \u0628\u0627\u0634\u062F "),r())}function be(i,l){i&1&&(n(0,"mat-error"),a(1," \u0636\u0631\u0648\u0631\u06CC \u0645\u06CC \u0628\u0627\u0634\u062F "),r())}function ye(i,l){i&1&&(n(0,"mat-error"),a(1," \u0636\u0631\u0648\u0631\u06CC \u0645\u06CC \u0628\u0627\u0634\u062F "),r())}function xe(i,l){if(i&1&&(n(0,"mat-option",17),a(1),r()),i&2){let e=l.$implicit;s("value",e),u(),A(e.fa_name)}}function Fe(i,l){i&1&&(n(0,"mat-error"),a(1," \u0636\u0631\u0648\u0631\u06CC \u0645\u06CC \u0628\u0627\u0634\u062F "),r())}function Se(i,l){if(i&1&&(n(0,"mat-option",17),a(1),r()),i&2){let e=l.$implicit;s("value",e),u(),A(e.fa_name)}}function Ee(i,l){i&1&&(n(0,"mat-error"),a(1," \u0636\u0631\u0648\u0631\u06CC \u0645\u06CC \u0628\u0627\u0634\u062F "),r())}function we(i,l){i&1&&(n(0,"mat-error"),a(1," \u0636\u0631\u0648\u0631\u06CC \u0645\u06CC \u0628\u0627\u0634\u062F "),r())}var Re=(()=>{class i{constructor(e,o,t,m,d){this.formBuilder=e,this.requestsService=o,this.doctorsService=t,this.notificationService=m,this.dialog=d,this.dialogRef=V(X),this.showOptionsProvince=!1,this.provinceCtrl=new q("",C.required),this.showOptionsCity=!1,this.cityCtrl=new q("",C.required),this.provinces=[],this.cities=[],this.submitted=!1}ngOnInit(){this.doctorForm=this.formBuilder.group({name:["",[C.required]],last_name:["",[C.required]],mobile:[""],medical_council_code:[""],city_id:[null,[C.required]],address:["",[C.required]],phone_number:[""],Latitude:[""],longitude:[""],extra_phone_number:[[]],tag:[""]}),this.getProvince()}get f(){return this.doctorForm.controls}_filterProvince(e){let o=e.toLowerCase();return this.provinces.filter(t=>t.fa_name.toLowerCase().includes(o))}displayProvince(e){return e&&e.fa_name?e.fa_name:""}selectProvince(e){this.cityCtrl.setValue(""),this.getCities(e.option.value.id)}_filterCity(e){let o=e.toLowerCase();return this.cities.filter(t=>t.fa_name.toLowerCase().includes(o))}displayCity(e){return e&&e.fa_name?e.fa_name:""}selectCities(e){this.doctorForm.patchValue({city_id:e.option.value.id})}hideOptionsCity(){setTimeout(()=>{this.showOptionsCity=!1},100)}getProvince(){this.requestsService.getProvince().subscribe({next:e=>{this.provinces=e.response.provinces,this.filteredProvinces=e.response.provinces,this.filteredProvinces=this.provinceCtrl.valueChanges.pipe(F(""),x(o=>{let t=typeof o=="string"?o:o?.fa_name||"";return t?this._filterProvince(t):this.provinces.slice()}))},error:e=>{this.notificationService.openSnackbar(e.error.message,"error")}})}getCities(e){this.requestsService.getCities(e).subscribe({next:o=>{this.cities=o.response,this.filteredCities=o.response,this.filteredCities=this.cityCtrl.valueChanges.pipe(F(""),x(t=>{let m=typeof t=="string"?t:t?.fa_name||"";return m?this._filterCity(m):this.cities.slice()}))},error:o=>{this.notificationService.openSnackbar(o.error.message,"error")}})}addDoctor(){let{name:e,last_name:o,mobile:t,medical_council_code:m,phone_number:d}=this.doctorForm.value;this.dialog.open(se,{data:{title:"\u062B\u0628\u062A \u062F\u06A9\u062A\u0631",description:`\u0622\u06CC\u0627 \u0627\u0632 \u062B\u0628\u062A \u062F\u06A9\u062A\u0631 ${e} ${o} \u0627\u0637\u0645\u06CC\u0646\u0627\u0646 \u062F\u0627\u0631\u06CC\u062F\u061F`,isAlert:!1}}).afterClosed().subscribe(h=>{h&&(this.doctorForm.patchValue({mobile:String(t),medical_council_code:String(m),phone_number:String(d)}),this.doctorsService.addDoctorLocal(this.doctorForm.value).subscribe({next:y=>{this.dialogRef.close(!0),this.notificationService.openSnackbar(y.message,"success")},error:y=>{this.notificationService.openSnackbar(y.error.message,"error")}}))})}static{this.\u0275fac=function(o){return new(o||i)(g(Q),g(ce),g(de),g(O),g(Y))}}static{this.\u0275cmp=N({type:i,selectors:[["app-doctor-form"]],decls:68,vars:25,consts:[["auto","matAutocomplete"],["auto1","matAutocomplete"],["mat-dialog-title","",1,""],[1,"dialog-title","w-full","bg-primary","text-primary-foreground","px-6","py-2","z-100","font-semibold","flex","justify-between","item-center"],[2,"font-size","small"],[1,"fa-solid","fa-xmark","font-semibold","text-xl","cursor-pointer",3,"mat-dialog-close"],["mat-dialog-content","",1,"bg-background","text-foreground","px-6","py-4","grid","grid-cols-1","md:grid-cols-2","gap-6",2,"height","auto"],[1,"text-muted-foreground"],[3,"formGroup"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-6","mt-2"],["appearance","outline",1,"inputs"],["matInput","","formControlName","name","type","text"],["matInput","","formControlName","last_name","type","text"],["matInput","","formControlName","mobile","type","number"],["matInput","","formControlName","phone_number","type","number"],["type","text","matInput","",3,"formControl","matAutocomplete"],[3,"optionSelected","displayWith"],[3,"value"],["matInput","","formControlName","medical_council_code","type","number"],[1,"form__group","mt-4"],[1,"relative"],["id","address","placeholder"," ","formControlName","address","rows","4",1,"block","p-2.5","w-full","text-sm","text-gray-900","bg-gray-50","rounded-lg","border","border-gray-300","focus:ring-blue-500","focus:border-blue-500","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500",3,"ngClass"],["for","address",1,"w-max","bg-background","text-muted-foreground","peer-focus:text-primary","absolute","top-2","z-10","origin-[0]","-translate-y-4","scale-95","transform","px-2","text-sm","duration-300","peer-placeholder-shown:top-1/2","peer-placeholder-shown:-translate-y-1/2","peer-placeholder-shown:scale-100","peer-focus:top-2","peer-focus:-translate-y-4","peer-focus:scale-95","peer-focus:px-2","ltr:left-1","rtl:right-1",3,"ngClass"],["mat-dialog-actions","",1,"flex","justify-end","p-0.5","bg-background","text-foreground","px-6","w-full","ltr:direction-ltr","rtl:direction-rtl"],[1,"w-full","md:w-[100px]","bg-primary","text-primary-foreground","flex-none","rounded-md","px-4","py-2.5","text-xs","font-semibold","mb-2","md:mb-0","md:mx-2","cursor-pointer","disabled:bg-muted","disabled:text-muted-foreground","disabled:cursor-not-allowed",3,"click","disabled"],[1,"w-full","md:w-[100px]","border","border-muted-foreground","text-muted-foreground","flex-none","rounded-md","px-4","py-2.5","text-xs","font-semibold","cursor-pointer",3,"mat-dialog-close"]],template:function(o,t){if(o&1){let m=P();n(0,"div",2)(1,"div",3)(2,"div")(3,"span",4),a(4,"\u0627\u0637\u0644\u0627\u0639\u0627\u062A \u062F\u06A9\u062A\u0631"),r()(),c(5,"i",5),r()(),n(6,"div",6)(7,"span",7),a(8,"\u0628\u0631\u0627\u06CC \u062B\u0628\u062A \u062F\u06A9\u062A\u0631 \u0645\u0648\u0631\u062F \u0646\u0638\u0631 \u0628\u0627\u06CC\u062F \u0641\u06CC\u0644\u062F \u0647\u0627\u06CC \u0636\u0631\u0648\u0631\u06CC \u0631\u0627 \u067E\u0631 \u06A9\u0646\u06CC\u062F."),r(),n(9,"form",8)(10,"div",9)(11,"mat-form-field",10)(12,"mat-label"),a(13,"\u0646\u0627\u0645"),r(),c(14,"input",11),p(15,_e,2,0,"mat-error"),r(),n(16,"mat-form-field",10)(17,"mat-label"),a(18,"\u0646\u0627\u0645 \u062E\u0627\u0646\u0648\u0627\u062F\u06AF\u06CC"),r(),c(19,"input",12),p(20,ve,2,0,"mat-error"),r(),n(21,"mat-form-field",10)(22,"mat-label"),a(23,"\u0645\u0648\u0628\u0627\u06CC\u0644"),r(),c(24,"input",13),p(25,be,2,0,"mat-error"),r(),n(26,"mat-form-field",10)(27,"mat-label"),a(28,"\u062A\u0644\u0641\u0646 \u062B\u0627\u0628\u062A"),r(),c(29,"input",14),p(30,ye,2,0,"mat-error"),r(),n(31,"mat-form-field",10)(32,"mat-label"),a(33,"\u0627\u0633\u062A\u0627\u0646"),r(),c(34,"input",15),n(35,"mat-autocomplete",16,0),b("optionSelected",function(h){return _(m),v(t.selectProvince(h))}),a(37,"> "),S(38,xe,2,2,"mat-option",17,pe),k(40,"async"),r(),p(41,Fe,2,0,"mat-error"),r(),n(42,"mat-form-field",10)(43,"mat-label"),a(44,"\u0634\u0647\u0631"),r(),c(45,"input",15),n(46,"mat-autocomplete",16,1),b("optionSelected",function(h){return _(m),v(t.selectCities(h))}),S(48,Se,2,2,"mat-option",17,pe),k(50,"async"),r(),p(51,Ee,2,0,"mat-error"),r(),n(52,"mat-form-field",10)(53,"mat-label"),a(54,"\u0634\u0645\u0627\u0631\u0647 \u0646\u0638\u0627\u0645 \u067E\u0632\u0634\u06A9\u06CC"),r(),c(55,"input",18),p(56,we,2,0,"mat-error"),r()(),n(57,"div")(58,"div",19)(59,"div",20),c(60,"textarea",21),n(61,"label",22),a(62,"\u0622\u062F\u0631\u0633* "),r()()()()()(),n(63,"div",23)(64,"button",24),b("click",function(){return _(m),v(t.addDoctor())}),a(65," \u062B\u0628\u062A "),r(),n(66,"button",25),a(67," \u0627\u0646\u0635\u0631\u0627\u0641 "),r()()}if(o&2){let m=w(36),d=w(47);u(9),s("formGroup",t.doctorForm),u(6),f(t.doctorForm.get("name").hasError("required")?15:-1),u(5),f(t.doctorForm.get("last_name").hasError("required")?20:-1),u(5),f(t.doctorForm.get("mobile").hasError("required")?25:-1),u(5),f(t.doctorForm.get("phone_number").hasError("required")?30:-1),u(4),s("formControl",t.provinceCtrl)("matAutocomplete",m),u(),s("displayWith",t.displayProvince),u(3),E(I(40,17,t.filteredProvinces)),u(3),f(t.provinceCtrl.hasError("required")?41:-1),u(4),s("formControl",t.cityCtrl)("matAutocomplete",d),u(),s("displayWith",t.displayCity),u(2),E(I(50,19,t.filteredCities)),u(3),f(t.cityCtrl.hasError("required")?51:-1),u(5),f(t.doctorForm.get("medical_council_code").hasError("required")?56:-1),u(4),s("ngClass",D(21,ge,t.submitted&&t.f.address.errors)),u(),s("ngClass",D(23,he,t.submitted&&t.f.estimated_delivery_date.errors)),u(3),s("disabled",t.doctorForm.invalid)}},dependencies:[ie,te,ee,U,W,R,z,$,G,H,J,K,Z,j,oe,ne,ae,re,B,le,me,ue],encapsulation:2})}}return i})();export{de as a,Re as b};
