import{a as N}from"./chunk-XP4VTDCW.js";import{$ as T}from"./chunk-6H3AXDJP.js";import"./chunk-JJVHQNWG.js";import{$a as j,Ga as _,Gb as k,Ha as c,S as v,Sa as w,T as s,V as y,Wa as S,Za as C,ab as D,ba as x,bb as a,ca as I,cb as u,db as M,dc as F,hb as V,jb as R,kb as p,vc as B,wa as n,wb as f,xa as l,xb as h,yc as g}from"./chunk-UXO2XUWN.js";var q=(()=>{class t{constructor(e){this.baseApiService=e}getInfo(){return this.baseApiService.getApi("api/lm")}static{this.\u0275fac=function(r){return new(r||t)(y(N))}}static{this.\u0275prov=v({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var G=t=>({"border-bottom-color":t});function H(t,U){if(t&1){let e=V();a(0,"div",2),R("click",function(){let o=x(e).$implicit,i=p();return I(i.goToRoute(o.route,o.name))}),M(1,"i",3),a(2,"span",4),f(3),u(),a(4,"span",5),f(5),u()()}if(t&2){let e=U.$implicit,r=p();w("ngStyle",k(5,G,r.getColor(e.color))),n(),S(e.icon),n(2),h(e.displayedVal),n(2),h(e.label)}}var A=(()=>{class t{constructor(e,r,o){this.dashboardService=e,this.notificationService=r,this.router=o,this.counters=[{icon:"fa-solid fa-light-emergency-on",value:0,label:"",displayedVal:0,color:"red",name:"urgent",route:"/requests"},{icon:"fa-solid fa-plus",value:0,label:"",displayedVal:0,color:"green",name:"new",route:"/requests"},{icon:"fa-solid fa-arrow-rotate-left",value:0,label:"",displayedVal:0,color:"blue",name:"returned",route:"/requests"},{icon:"fa-solid fa-truck",value:0,label:"",displayedVal:0,color:"yellow",name:"ready",route:"/requests"}],this.interval=4e3,this.hasRunBefore=!1}ngOnInit(){this.getInfo()}runCounterUp(){this.counters.forEach((o,i)=>{let d=this.hasRunBefore&&this.counters[i].displayedVal||0,m=o.value,$=this.hasRunBefore?1:Math.ceil(m/(1e3/10)),O=setInterval(()=>{d+=$,d>=m?(clearInterval(O),this.counters[i].displayedVal=m):this.counters[i].displayedVal=d},10)}),this.hasRunBefore=!0}getInfo(){this.dashboardService.getInfo().subscribe({next:e=>{e.status&&(this.counters[0].label=e.response.order_summary.urgent.name),this.counters[0].value=e.response.order_summary.urgent.value,this.counters[1].label=e.response.order_summary.new.name,this.counters[1].value=e.response.order_summary.new.value,this.counters[2].label=e.response.order_summary.returned.name,this.counters[2].value=e.response.order_summary.returned.value,this.counters[3].label=e.response.order_summary.ready.name,this.counters[3].value=e.response.order_summary.ready.value,this.runCounterUp()},error:e=>{this.notificationService.openSnackbar(e.error.message,"error")}})}goToRoute(e,r){this.router.navigate([e],{state:{mode:r}})}getColor(e){switch(e){case"red":return"#ef4444";case"green":return"#22c55e";case"blue":return"#3b82f6";case"yellow":return"#eab308";default:return"#d1d5db"}}static{this.\u0275fac=function(r){return new(r||t)(l(q),l(T),l(B))}}static{this.\u0275cmp=_({type:t,selectors:[["app-dashboard"]],decls:3,vars:0,consts:[[1,"w-full","mx-auto","grid","grid-cols-2","gap-4","py-8","md:flex","md:flex-wrap","md:justify-center","md:gap-8"],[1,"h-40","md:w-44","md:h-44","dark:bg-muted","bg-gray-200","rounded-lg","flex","flex-col","cursor-pointer","hover:bg-card/50","justify-around","items-center","text-foreground","text-center","border-b-[10px]",3,"ngStyle"],[1,"h-40","md:w-44","md:h-44","dark:bg-muted","bg-gray-200","rounded-lg","flex","flex-col","cursor-pointer","hover:bg-card/50","justify-around","items-center","text-foreground","text-center","border-b-[10px]",3,"click","ngStyle"],[1,"text-4xl","text-primary"],[1,"text-3xl","font-bold"],[1,"text-lg","font-bold"]],template:function(r,o){r&1&&(a(0,"div",0),j(1,H,6,7,"div",1,C),u()),r&2&&(n(),D(o.counters))},dependencies:[F],encapsulation:2})}}return t})();var J=[{path:"",component:A}],E=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275mod=c({type:t})}static{this.\u0275inj=s({imports:[g.forChild(J),g]})}}return t})();var te=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275mod=c({type:t})}static{this.\u0275inj=s({imports:[E]})}}return t})();export{te as DashboardModule};
